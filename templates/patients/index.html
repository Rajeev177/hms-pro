{% extends 'layout.html' %}
{% block content %}
<h4 class="mb-3">All Patients</h4>

<a href="{{ url_for('add_patient') }}" class="btn btn-primary mb-3">
  <i class="bi bi-plus-circle"></i> Add Patient
</a>

<table class="table table-striped table-hover">
  <thead class="table-primary">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Age</th>
      <th>Gender</th>
      <th>Problem</th>
      <th>Report</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for p in patients %}
    <tr>
      <td>{{ p.id }}</td>
      <td>{{ p.name }}</td>
      <td>{{ p.age }}</td>
      <td>{{ p.gender }}</td>
      <td>{{ p.problem }}</td>
      <td>
        {% if p.report %}
        <a href="{{ url_for('uploaded_file', filename=p.report) }}" target="_blank">View</a>
        {% else %}
        -
        {% endif %}
      </td>
      <td>
        <a href="{{ url_for('edit_patient', id=p.id) }}" class="btn btn-sm btn-outline-info"><i class="bi bi-pencil-square"></i></a>
        <a href="{{ url_for('delete_patient', id=p.id) }}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure?')"><i class="bi bi-trash"></i></a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
